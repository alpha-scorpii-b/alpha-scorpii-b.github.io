---
layout: page
title: Documentation
---
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Attribute animation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Attribute animation is a new system for Urho3D, With it user can apply animation to object’s attribute. All object derived from <a class="el" href="a00054.html" title="Base class for animatable object, an animatable object can be set animation on it&#39;s attributes...">Animatable</a> can use attribute animation, currently these classes include <a class="el" href="a00236.html" title="Scene node that may contain components and child nodes.">Node</a>, <a class="el" href="a00102.html" title="Base class for components. Components can be created to scene nodes.">Component</a> and <a class="el" href="a00363.html" title="Base class for UI elements.">UIElement</a>.</p>
<p>These are two way to use use attribute animation. First user can create attribute animation with code, and then apply it to object’s attribute. Here is a simple code for light color animation: </p>
<div class="fragment"><div class="line">SharedPtr&lt;AttributeAnimation&gt; colorAnimation(<span class="keyword">new</span> AttributeAnimation(context_));</div>
<div class="line">colorAnimation-&gt;SetKeyFrame(0.0f, <a class="code" href="a00100.html#a42aad3adf983cede243a815e0cccd76f" title="Opaque white color.">Color::WHITE</a>);</div>
<div class="line">colorAnimation-&gt;SetKeyFrame(2.0f, <a class="code" href="a00100.html#af24903f33104585787cd4c3e88016234" title="Opaque yellow color.">Color::YELLOW</a>);</div>
<div class="line">colorAnimation-&gt;SetKeyFrame(4.0f, <a class="code" href="a00100.html#a42aad3adf983cede243a815e0cccd76f" title="Opaque white color.">Color::WHITE</a>);</div>
<div class="line"></div>
<div class="line">light-&gt;SetAttributeAnimation(<span class="stringliteral">&quot;Color&quot;</span>, colorAnimation, WM_LOOP); </div>
</div><!-- fragment --><p>On above code, we first create an AttributeAnimation object call colorAnimation, and set it’s key frame value, then apply it to light’s color attribute. (Note here: in order to make animation look correct, the last key frame must equal to the first key frame for loop mode).</p>
<p>Another way is load attribute animation from resource, here is a simple sample: </p>
<div class="fragment"><div class="line">AttributeAnimatio* colorAnimation = cache-&gt;GetResource&lt;AttributeAnimation&gt;(<span class="stringliteral">&quot;Scene/LightColorAnimation.xml&quot;</span>);</div>
<div class="line">light-&gt;SetAttributeAnimation(<span class="stringliteral">&quot;Color&quot;</span>, colorAnimation, WM_LOOP);</div>
</div><!-- fragment --><p>These are three kind of wrap mode for attribute animation:</p>
<ul>
<li>WM_LOOP: Loop mode, when the animation arrived to end, it will loop from begin.</li>
<li>WM_ONCE: Play once mode, when the animation finished, it will be removed from the object.</li>
<li>WM_CLAMP: Clamp mode, then the animation finished, it will keep the last key frame’s value.</li>
</ul>
<p>These is another argument call speed the animation play speed, the default value is 1.0f, user can change the value to control the animation play speed. User can also change animation’s wrap mode and speed on fly.</p>
<p>When user want to apply multi-attribute animation to an object, <a class="el" href="a00241.html" title="Object animation class, an object animation include one or more attribute animations and theirs wrap ...">ObjectAnimation</a> is for it. For example when user want to apply position and color animation for light, can use following code: </p>
<div class="fragment"><div class="line"><span class="comment">// Create object animation.</span></div>
<div class="line">SharedPtr&lt;ObjectAnimation&gt; lightAnimation(<span class="keyword">new</span> ObjectAnimation(context_));</div>
<div class="line"></div>
<div class="line"><span class="comment">// Create position animation</span></div>
<div class="line">SharedPtr&lt;AttributeAnimation&gt; positionAnimation(<span class="keyword">new</span> AttributeAnimation(context_));</div>
<div class="line">positionAnimation-&gt;SetKeyFrame(0.0f, <a class="code" href="a00375.html#ad412e0011a7987f2b91c530158f19f16" title="Zero vector.">Vector3::ZERO</a>);</div>
<div class="line">positionAnimation-&gt;SetKeyFrame(1.0f, Vector3(1.0f, 1.0f, 1.0f));</div>
<div class="line">positionAnimation-&gt;SetKeyFrame(4.0f, <a class="code" href="a00375.html#ad412e0011a7987f2b91c530158f19f16" title="Zero vector.">Vector3::ZERO</a>);</div>
<div class="line"><span class="comment">// Add position animation</span></div>
<div class="line">lightAnimation-&gt;AddAttributeAnimation(<span class="stringliteral">&quot;Position&quot;</span>, positionAnimation, WM_LOOP); </div>
<div class="line"></div>
<div class="line"><span class="comment">// Create color animation</span></div>
<div class="line">SharedPtr&lt;AttributeAnimation&gt; colorAnimation(<span class="keyword">new</span> AttributeAnimation(context_));</div>
<div class="line">colorAnimation-&gt;SetKeyFrame(0.0f, <a class="code" href="a00100.html#a42aad3adf983cede243a815e0cccd76f" title="Opaque white color.">Color::WHITE</a>);</div>
<div class="line">colorAnimation-&gt;SetKeyFrame(2.0f, <a class="code" href="a00100.html#af24903f33104585787cd4c3e88016234" title="Opaque yellow color.">Color::YELLOW</a>);</div>
<div class="line">colorAnimation-&gt;SetKeyFrame(4.0f, <a class="code" href="a00100.html#a42aad3adf983cede243a815e0cccd76f" title="Opaque white color.">Color::WHITE</a>);</div>
<div class="line"><span class="comment">// Add color animation</span></div>
<div class="line">lightAnimation-&gt;AddAttributeAnimation(<span class="stringliteral">&quot;Color&quot;</span>, colorAnimation, WM_LOOP); </div>
<div class="line"></div>
<div class="line"><span class="comment">// Apply object animation to light</span></div>
<div class="line">light-&gt;SetObjectAnimation(lightAnimation);</div>
</div><!-- fragment --><p>Also user can load object animation from file, like: </p>
<div class="fragment"><div class="line">ObjectAnimation * lightAnimation = cache-&gt;GetResource&lt; ObjectAnimation &gt;(<span class="stringliteral">&quot;Scene/LightAnimation.xml&quot;</span>);</div>
<div class="line">light-&gt; SetObjectAnimation (lightAnimation);</div>
</div><!-- fragment --><p>Current attribute animation use linear interpolation for numeric value type (like float, <a class="el" href="a00374.html" title="Two-dimensional vector.">Vector2</a>, <a class="el" href="a00375.html" title="Three-dimensional vector.">Vector3</a> etc), and these is no interpolation for non-numeric type (like int, bool).</p>
<p>Attribute animation and object animation can be save to scene file, Someday if our editor support edit animation, we can create animation in editor and save it to scene file.</p>
<h1><a class="anchor" id="AttributeAnimation_Classes"></a>
Classes of attribute animation:</h1>
<ul>
<li><a class="el" href="a00054.html" title="Base class for animatable object, an animatable object can be set animation on it&#39;s attributes...">Animatable</a>: Base class for animatable object, an animatable object can be set animation on it's attributes, or can be set an object animation to it.</li>
<li>AttributeAnimation: Attribute animation class, include some key frame in it.</li>
<li><a class="el" href="a00241.html" title="Object animation class, an object animation include one or more attribute animations and theirs wrap ...">ObjectAnimation</a>: <a class="el" href="a00240.html" title="Base class for objects with type identification, subsystem access and event sending/receiving capabil...">Object</a> animation class, an object animation include one or more attribute animations and theirs wrap mode and speed for an <a class="el" href="a00054.html" title="Base class for animatable object, an animatable object can be set animation on it&#39;s attributes...">Animatable</a> object.</li>
<li>AttributeAnimationInfo: Attribute animation info, it include attribute animation, wrap mode and animation speed.</li>
<li><a class="el" href="a00071.html" title="Attribute animation instance, it include animation runtime information, when animation playing it wil...">AttributeAnimationInstance</a>: Attribute animation instance, it is derived from AttributeAnimationInfo. and include animation runtime information, when animation playing it will update the object's attribute value automatically. </li>
</ul>
</div></div><!-- contents -->
